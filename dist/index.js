const p=7,s={"content-type":"application/json;charset=UTF-8","X-Auth-Email":ACCOUNT_EMAIL,"X-Auth-Key":API_KEY},r=async()=>{const t=`https://api.cloudflare.com/client/v4/accounts/${ACCOUNT_ID}/pages/projects`;return(await(await fetch(t,{headers:s})).json()).result},i=async t=>{const e=`https://api.cloudflare.com/client/v4/accounts/${ACCOUNT_ID}/pages/projects/${t}/deployments`;return(await(await fetch(e,{headers:s})).json()).result},c=async()=>{const t=await r();for(;t.length>0;){const e=t.shift(),n=`https://api.cloudflare.com/client/v4/accounts/${ACCOUNT_ID}/pages/projects/${e}/deployments`,a=await i(e.name);for(const o of a)(Date.now()-new Date(o.created_on))/864e5>7&&await fetch(`${n}/${o.id}`,{method:"DELETE",headers:s})}return new Response("OK",{status:200})};addEventListener("fetch",t=>{t.respondWith(c())}),addEventListener("scheduled",t=>{t.waitUntil(c())});
